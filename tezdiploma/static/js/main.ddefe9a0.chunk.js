(this["webpackJsonptez-diploma-client"]=this["webpackJsonptez-diploma-client"]||[]).push([[0],{267:function(e,t){},423:function(e,t,n){},424:function(e,t,n){},431:function(e,t){},433:function(e,t){},443:function(e,t){},445:function(e,t){},472:function(e,t){},474:function(e,t){},475:function(e,t){},480:function(e,t){},482:function(e,t){},488:function(e,t){},490:function(e,t){},509:function(e,t){},521:function(e,t){},524:function(e,t){},638:function(e,t){},649:function(e,t){},678:function(e,t){},679:function(e,t){},842:function(e,t){},843:function(e,t){},844:function(e,t){},851:function(e,t,n){"use strict";n.r(t),n.d(t,"NETWORK",(function(){return Un}));var a=n(1),r=n.n(a),i=n(44),c=n.n(i),o=(n(423),n(424),n(0)),s=n.n(o),l=n(22),u=n(907),d=n(68),p=n(101),h=n(5),m=n(8),j=n(123),b=n.n(j),f=new function e(){Object(h.a)(this,e),this.selectedItems=[];for(var t=new Date,n=0;n<9;n++)this.selectedItems.push({id:n.toString(),createdDate:t,modifiedDate:t,name:"A"+n,description:"This is a media card. You can use this section to describe the content.",imageUrl:"https://source.unsplash.com/random"})},v=n(156),g=new function e(){var t=this;Object(h.a)(this,e),this._profileVar=Object(v.c)({id:"1",createdDate:new Date,modifiedDate:new Date,name:"test",useDarkMode:!0}),this.profileVar=function(){return t._profileVar()},this.update=function(e){t._profileVar(e)}},O=function(){return g},x=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"isString",value:function(e){return"string"===typeof e||e instanceof String}},{key:"isNullOrWhitespace",value:function(t){return!e.isString(t)||(null===t||void 0===t||""===t.trim())}},{key:"isNullOrDefault",value:function(t,n){return e.isNullOrWhitespace(t)||t===n}},{key:"timeout",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"toJsonString",value:function(e){return JSON.stringify(e,null,2)}},{key:"imageUrlToBlob",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return e.abrupt("return",e.sent.blob());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();x.truncateString=function(e,t){return e&&t<e.length?"".concat(e.substr(0,t),"..."):e},x.truncateStringInTheMiddle=function(e,t,n){if(e&&t+n<e.length)return"".concat(e.substr(0,t),"...").concat(e.substr(e.length-n,e.length));return e};var y,w,k,_,I,S=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"notNull",value:function(e,t){if(null===e||void 0===e)throw new Error("Unexpected null exception. "+t)}},{key:"notNullOrWhiteSpace",value:function(e,t,n){if(null===e||void 0===e||""===(null===e||void 0===e?void 0:e.trim()))throw n?new Error(n):new Error("Unexpected null exception. "+t)}},{key:"maxLength",value:function(e,t,n){if(e&&e.length>n)throw new Error("".concat(t," exceeds the maximum length of ").concat(n))}}]),e}(),N=new(function(){function e(){Object(h.a)(this,e),this._baseUrl=void 0,this._itemStorage=void 0,S.notNullOrWhiteSpace("https://tezdiploma.herokuapp.com/","process.env.REACT_APP_API_URL"),this._baseUrl="https://tezdiploma.herokuapp.com/",this._baseUrl=this._baseUrl.endsWith("/")?this._baseUrl.substr(0,this._baseUrl.length-1):this._baseUrl,this._itemStorage=f}return Object(m.a)(e,[{key:"handleResponse",value:function(e,t){return(null===e||void 0===e?void 0:e.data)&&e.data?Array.isArray(e.data)?Promise.resolve(e.data.map((function(e){return t(e)}))):Promise.resolve(t(e.data)):Promise.reject(e)}},{key:"getItemsAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.timeout(2e3);case 2:return t=this._itemStorage.selectedItems,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post(this._baseUrl+"/account/login",{signature:t,publicKey:n});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"mintDocument",value:function(e,t){var n=this,a=new FormData;return a.append("image",t,e),b.a.post(this._baseUrl+"/documents/mint",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return console.log(e),n.handleResponse(e,(function(e){return e}))})).catch((function(e){return Promise.reject(e)}))}}]),e}()),C=function(){return N},A=n(28),E=n(19),D=n(18),T=n(911),P=n(912),U=n(399),z=n(390),L="TEZDIPLOMA",W="tez-diploma-storage:wallet-account",B="tez-diploma-storage:auth-token",R="Sign this message to authenticate with TEZDIPLOMA.",F=48,M=192,q=n(43),$=n(913),H=Object($.a)(y||(y=Object(q.a)(["\n  query GetEntities($input: EntitiesFilterRequest!) {\n    entities(input: $input) {\n      totalCount\n      cursor\n      hasMore\n      entities {\n        _id\n        chainId\n        createdDate\n        modifiedDate\n        owner\n        name\n        description\n        imageUrl\n      }\n    }\n  }\n"]))),G=Object($.a)(w||(w=Object(q.a)(["\n  query GetEntity($id: ID!) {\n    entity(id: $id) {\n      _id\n      chainId\n      createdDate\n      modifiedDate\n      owner\n      name\n      description\n      imageUrl\n    }\n  }\n"]))),J=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.isNullOrWhitespace(n)){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,t.query({query:G,variables:{id:n},fetchPolicy:"network-only"});case 4:return a=e.sent,e.abrupt("return",a.data.entity);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=(Object($.a)(k||(k=Object(q.a)(["\n  query GetItems($first: Int!, $skip: Int!) {\n    items(first: $first, skip: $skip) @client {\n      id\n      createdDate\n      modifiedDate\n      name\n      description\n      imageUrl\n    }\n  }\n"]))),C()),Q={items:function(e,t){return Object(l.a)(s.a.mark((function e(){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.first,a=t.skip,e.prev=1,console.log("first",n,"skip",a),e.next=5,V.getItemsAsync();case 5:return r=e.sent,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})))()}},K=Object($.a)(_||(_=Object(q.a)(["\n  query GetProfile {\n    profile @client {\n      id\n      createdDate\n      modifiedDate\n      name\n      useDarkMode\n    }\n  }\n"]))),Z=O(),X=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return n}(T.a),Y=new P.a({typePolicies:{Query:{fields:{isLoggedIn:{read:function(){return re()}},profile:{read:function(){return Z.profileVar()}}}}}}),ee={Query:Object(A.a)({},Q)},te=Object(U.a)({uri:"https://tezdiploma.herokuapp.com/graphql"}),ne=new X({link:Object(z.a)((function(e,t){var n=t.headers,a=localStorage.getItem(B);return{headers:Object(A.a)(Object(A.a)({},n),{},{authorization:a?"Bearer ".concat(a):""})}})).concat(te),cache:Y,resolvers:ee,headers:{"client-name":"tez-diploma-client","client-version":"0.1.0"}}),ae=function(){return ne},re=Object(v.c)(!0),ie=n(391),ce=new function e(){var t=this;Object(h.a)(this,e),this._client=void 0,this.uploadAsync=function(){var e=Object(l.a)(s.a.mark((function e(n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._client.add(n);case 2:return a=e.sent,e.abrupt("return",{url:"https://ipfs.infura.io/ipfs/".concat(a.path),path:a.path,size:a.size,cid:a.cid});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._client=Object(ie.create)({url:"https://ipfs.infura.io:5001/api/v0"})},oe=function(){return ce},se=n(133),le=n(255),ue=n(392),de=n.n(ue),pe=function e(){Object(h.a)(this,e)},he=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"readFileAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return n=e.sent,e.abrupt("return",n.text());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pe),me=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"readFileAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve(de.a.readFileSync(t,"utf8")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(pe);!function(e){e[e.Browser=0]="Browser",e[e.Local=1]="Local"}(I||(I={}));var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I.Browser;switch(e){case I.Local:return new me;default:return new he}},be=function(){function e(t){Object(h.a)(this,e),this._config=void 0,this._fileUtil=void 0,this._fileUtil=t}return Object(m.a)(e,[{key:"values",get:function(){return this._config}},{key:"initAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(){var t,n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._fileUtil.readFileAsync(this.contractsPath);case 2:return t=e.sent,e.next=5,this._fileUtil.readFileAsync(this.fa2Path);case 5:return n=e.sent,e.next=8,this._fileUtil.readFileAsync(this.tezdiplomaPath);case 8:a=e.sent,this._config={contracts:JSON.parse(t),fa2:JSON.parse(n),tezdiploma:JSON.parse(a)};case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();(function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(h.a)(this,n),t.call(this,je(I.Local))}return Object(m.a)(n,[{key:"contractsPath",get:function(){return"./public/data/tezos/contracts.json"}},{key:"fa2Path",get:function(){return"./public/data/tezos/fa2.json"}},{key:"tezdiplomaPath",get:function(){return"./public/data/tezos/tezdiploma.json"}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}(be)).instance=void 0;var fe=function(e){Object(E.a)(n,e);var t=Object(D.a)(n);function n(){return Object(h.a)(this,n),t.call(this,je(I.Browser))}return Object(m.a)(n,[{key:"contractsPath",get:function(){return"./data/tezos/contracts.json"}},{key:"fa2Path",get:function(){return"./data/tezos/fa2.json"}},{key:"tezdiplomaPath",get:function(){return"./data/tezos/tezdiploma.json"}}],[{key:"getInstance",value:function(){return n.instance||(n.instance=new n),n.instance}}]),n}(be);fe.instance=void 0;var ve,ge,Oe,xe,ye,we,ke,_e,Ie,Se,Ne,Ce,Ae,Ee,De=n(191),Te=function(){function e(t){Object(h.a)(this,e),this._config=void 0,this._config=t}return Object(m.a)(e,[{key:"extractTransaction",value:function(e,t,n){if(Array.isArray(e)){var a=e.findIndex((function(e){return e.hash===t}));if(-1!==a){var r=e[a];if(Array.isArray(r.contents)){var i=r.contents.findIndex((function(e){var t;return(null===(t=e.parameters)||void 0===t?void 0:t.entrypoint)===n}));if(-1!==i)return r.contents[i]}}}}},{key:"extractId",value:function(e,t,n,a){var r,i=null===t||void 0===t||null===(r=t.block)||void 0===r?void 0:r.operations;if(Array.isArray(i)){var c,o=Object(De.a)(i);try{for(o.s();!(c=o.n()).done;){var s,l,u,d,p=c.value,h=this.extractTransaction(p,e,n);if(Array.isArray(null===h||void 0===h||null===(s=h.metadata)||void 0===s||null===(l=s.operation_result)||void 0===l?void 0:l.big_map_diff)){var m=null===(u=h.metadata)||void 0===u||null===(d=u.operation_result)||void 0===d?void 0:d.big_map_diff,j=m.findIndex((function(e){return e.big_map===a}));if(-1!==j)return m[j].key.int}}}catch(b){o.e(b)}finally{o.f()}}}},{key:"extractEntityId",value:function(e,t){var n,a=null===(n=this._config.values)||void 0===n?void 0:n.tezdiploma.entities;return S.notNullOrWhiteSpace(a,"bigMapId"),this.extractId(e,t,"create_entity",a)}},{key:"extractTemplateId",value:function(e,t){var n,a=null===(n=this._config.values)||void 0===n?void 0:n.tezdiploma.templates;return S.notNullOrWhiteSpace(a,"bigMapId"),this.extractId(e,t,"create_template",a)}},{key:"extractDocumentId",value:function(e,t){var n,a=null===(n=this._config.values)||void 0===n?void 0:n.tezdiploma.documents;return S.notNullOrWhiteSpace(a,"bigMapId"),this.extractId(e,t,"create_document",a)}}]),e}(),Pe=new function e(){var t=this;Object(h.a)(this,e),this._client=void 0,this._config=void 0,this._util=void 0,this._contract=void 0,this.setWalletProvider=function(e){t._client.setProvider({wallet:e})},this.toTokenMetadata=function(e){try{return{tokenId:e.id.toString(),metadataUrl:Object(le.a)(e.token_info.get(""))}}catch(t){return void console.log(t)}},this.initContract=Object(l.a)(s.a.mark((function e(){var n,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.notNullOrWhiteSpace(null===(n=t._config.values)||void 0===n?void 0:n.contracts.tez_diploma_address,"tez_diploma_address","Tezdiploma contract address is undefined."),t._contract){e.next=5;break}return e.next=4,t._client.wallet.at(null===(a=t._config.values)||void 0===a?void 0:a.contracts.tez_diploma_address);case 4:t._contract=e.sent;case 5:return e.abrupt("return",t._contract);case 6:case"end":return e.stop()}}),e)}))),this.createEntityAsync=Object(l.a)(s.a.mark((function e(){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initContract();case 2:return n=e.sent,e.next=5,n.methods.create_entity(se.b).send();case 5:return a=e.sent,console.log("op.opHash",a.opHash),e.next=9,a.confirmation();case 9:return r=e.sent,e.abrupt("return",t._util.extractEntityId(a.opHash,r));case 11:case"end":return e.stop()}}),e)}))),this.createTemplateAsync=function(){var e=Object(l.a)(s.a.mark((function e(n){var a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initContract();case 2:return a=e.sent,e.next=5,a.methods.create_template(n).send();case 5:return r=e.sent,console.log("op.opHash",r.opHash),e.next=9,r.confirmation();case 9:return i=e.sent,e.abrupt("return",t._util.extractTemplateId(r.opHash,i));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.createDocument=function(){var e=Object(l.a)(s.a.mark((function e(n,a,r){var i,c,o,l,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=u.length>3&&void 0!==u[3]?u[3]:"0",e.next=3,t.initContract();case 3:return c=e.sent,e.next=6,c.methods.create_document(n,a,Object(le.b)(r),i).send();case 6:return o=e.sent,console.log("op.opHash",o.opHash),e.next=10,o.confirmation();case 10:return l=e.sent,e.abrupt("return",t._util.extractDocumentId(o.opHash,l));case 12:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),S.notNullOrWhiteSpace("https://florencenet.smartpy.io/","REACT_APP_TEZOS_RPC_URL"),this._client=new se.a("https://florencenet.smartpy.io/"),this._config=fe.getInstance(),this._util=new Te(this._config)},Ue=function(){return Pe},ze=n(47),Le=n(56),We=n(36),Be=n(896),Re=n(406),Fe=n(897),Me=n(891),qe=n(887),$e=n(916),He=n(893),Ge=n(894),Je=n(909),Ve=n(895),Qe=n(892),Ke=n(2),Ze=Object(qe.a)((function(e){return{root:{display:"flex",alignItems:"center"},wrapper:{position:"relative"},buttonProgress:{position:"absolute",top:"50%",left:"50%",marginTop:-10,marginLeft:-12}}})),Xe=function(e){var t,n,a=Ze(),i=r.a.useState(!1),c=Object(We.a)(i,2),o=c[0],u=c[1],d=function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(!0),t.prev=1,t.next=4,e.callbackFn();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:u(!1);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(){return t.apply(this,arguments)}}();return Object(Ke.jsx)("div",{className:a.root,children:Object(Ke.jsxs)("div",{className:a.wrapper,children:[Object(Ke.jsx)(Me.a,{size:null!==(t=e.size)&&void 0!==t?t:"small",variant:null!==(n=e.variant)&&void 0!==n?n:"contained",color:e.color,onClick:d,disabled:o,autoFocus:e.autoFocus,children:e.children}),o&&Object(Ke.jsx)(Qe.a,{size:20,className:a.buttonProgress})]})})},Ye=Object($.a)(ve||(ve=Object(q.a)(["\n  mutation CreateEntity($input: CreateEntityRequest!) {\n    createEntity(input: $input) {\n      success\n      message\n      entity {\n        _id\n        chainId\n        name\n        description\n        createdDate\n        modifiedDate\n        imageUrl\n      }\n    }\n  }\n"]))),et=Object($.a)(ge||(ge=Object(q.a)(["\n  mutation UpdateEntity($input: UpdateEntityRequest!) {\n    updateEntity(input: $input) {\n      success\n      message\n      entity {\n        _id\n        chainId\n        createdDate\n        modifiedDate\n        owner\n        name\n        description\n        imageUrl\n      }\n    }\n  }\n"]))),tt=new(function(){function e(){Object(h.a)(this,e),this._apollo=void 0,this._tezos=void 0,this._apollo=ae(),this._tezos=Ue()}return Object(m.a)(e,[{key:"saveAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.notNull(t,"entity"),S.notNullOrWhiteSpace(t.name,"name","Please provide a name."),S.notNullOrWhiteSpace(t.description,"description","Please provide a description."),!x.isNullOrWhitespace(t.id)){e.next=7;break}return e.abrupt("return",this.createAsync({chainId:t.chainId,name:t.name,description:t.description},n));case 7:return e.abrupt("return",this.updateAsync({id:String(t.id),name:t.name,description:t.description}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,i,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.isNullOrWhitespace(t.chainId)){e.next=7;break}return e.next=3,this._tezos.createEntityAsync();case 3:o=e.sent,S.notNullOrWhiteSpace(o,"tezosId","Entity could not be created on chain."),t.chainId=String(o),n(t);case 7:return e.next=9,this._apollo.mutate({mutation:Ye,variables:{input:t}});case 9:return l=e.sent,console.log(null===(a=l.data)||void 0===a?void 0:a.createEntity),e.abrupt("return",null===(r=l.data)||void 0===r||null===(i=r.createEntity)||void 0===i||null===(c=i.entity)||void 0===c?void 0:c._id);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t){var n,a,r,i,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._apollo.mutate({mutation:et,variables:{input:t}});case 2:return c=e.sent,console.log(null===(n=c.data)||void 0===n?void 0:n.updateEntity),e.abrupt("return",null===(a=c.data)||void 0===a||null===(r=a.updateEntity)||void 0===r||null===(i=r.entity)||void 0===i?void 0:i._id);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}()),nt=function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,null,[{key:"formatSnackbarMessage",value:function(e){if(e){var t,n;if(console.log(e),x.isString(e))t=e;else t=e.message?e.message:(null===(n=e.error)||void 0===n?void 0:n.message)?e.error.message:JSON.stringify(e);return t.length>128?t.substr(0,128)+"...":t}return"Something went wrong."}}]),e}(),at=Object(qe.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(2)}}}})),rt=function(e){var t,n=at(),r=Object(p.b)().enqueueSnackbar,i=tt,c=Object(a.useState)(!1),o=Object(We.a)(c,2),u=o[0],d=o[1],h=Object(Le.f)(),m=Object(a.useCallback)((function(){var t,n,a,r,i,c,o,s;return{id:null!==(t=null===(n=e.entity)||void 0===n?void 0:n._id)&&void 0!==t?t:"",chainId:null!==(a=null===(r=e.entity)||void 0===r?void 0:r.chainId)&&void 0!==a?a:"",name:null!==(i=null===(c=e.entity)||void 0===c?void 0:c.name)&&void 0!==i?i:"",description:null!==(o=null===(s=e.entity)||void 0===s?void 0:s.description)&&void 0!==o?o:""}}),[e.entity]),j=Object(a.useState)(m()),b=Object(We.a)(j,2),f=b[0],v=b[1],g=!!(null===(t=e.entity)||void 0===t?void 0:t._id),O=function(){d(!1),e.onClose()};Object(a.useEffect)((function(){d(e.open),v(m())}),[e.open,m]);var x=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,S.maxLength(f.name,"name",F),S.maxLength(f.description,"description",M),e.next=5,i.saveAsync(f,(function(e){v(e),console.log(e)}));case 5:t=e.sent,O(),t!==f.id&&setTimeout((function(){h.push("/entities/".concat(t))}),100),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),r(nt.formatSnackbarMessage(e.t0));case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(Ke.jsxs)($e.a,{open:u,keepMounted:!0,onClose:O,className:n.root,children:[Object(Ke.jsxs)(He.a,{children:[g?"Edit":"Create"," institute"]}),Object(Ke.jsxs)(Ge.a,{children:[Object(Ke.jsx)(Je.a,{label:"Name",fullWidth:!0,autoComplete:"new-password",value:f.name,onChange:function(e){return v(Object(A.a)(Object(A.a)({},f),{},{name:e.target.value}))}}),Object(Ke.jsx)(Je.a,{label:"Description",multiline:!0,fullWidth:!0,autoComplete:"new-password",rows:4,value:f.description,variant:"outlined",onChange:function(e){return v(Object(A.a)(Object(A.a)({},f),{},{description:e.target.value}))}})]}),Object(Ke.jsxs)(Ve.a,{children:[Object(Ke.jsx)(Me.a,{onClick:O,color:"primary",children:"Close"}),Object(Ke.jsx)(Xe,{color:"primary",callbackFn:x,autoFocus:!0,children:g?"Save":"Create"})]})]})},it=Object(qe.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(1,0,1)},heroButtons:{marginTop:e.spacing(4)}}})),ct=function(){var e=it(),t=Object(d.c)().activeAccount,n=r.a.useState(!1),a=Object(We.a)(n,2),i=a[0],c=a[1];return Object(Ke.jsxs)("div",{className:e.heroContent,children:[Object(Ke.jsxs)(Be.a,{maxWidth:"sm",children:[Object(Ke.jsxs)(Re.a,{variant:"h5",align:"center",color:"textSecondary",paragraph:!0,children:["Tamper-proof diplomas on ",Object(Ke.jsx)("i",{children:"Tezos"}),".",Object(Ke.jsx)("br",{}),"TEZDIPLOMA is an NFT based solution for countering the ongoing forgery of documents."]}),t&&Object(Ke.jsx)("div",{className:e.heroButtons,children:Object(Ke.jsxs)(Fe.a,{container:!0,spacing:2,justifyContent:"center",children:[Object(Ke.jsx)(Fe.a,{item:!0,children:Object(Ke.jsx)(Me.a,{variant:"contained",color:"primary",onClick:function(){c(!0)},children:"Create institute"})}),Object(Ke.jsx)(Fe.a,{item:!0,children:Object(Ke.jsx)(Me.a,{variant:"outlined",color:"primary",component:ze.b,to:"/account/"+t.address,children:"Browse existing"})})]})})]}),Object(Ke.jsx)(rt,{open:i,onClose:function(){c(!1)}})]})},ot=n(898),st=Object(qe.a)((function(e){return{root:{width:"100%",textAlign:"center",marginBottom:"20px"},table:{marginLeft:"auto",marginRight:"auto"},logo:{marginTop:"8px",marginRight:"5px",width:"50px"},title:{fontSize:22,fontWeight:500,margin:"0px !important"},subtitleCell:{textAlign:"right"},subtitle:{fontSize:12,color:"#535353"}}})),lt=function(){var e=st();return Object(Ke.jsx)("div",{className:e.root,children:Object(Ke.jsx)("table",{className:e.table,children:Object(Ke.jsxs)("tbody",{children:[Object(Ke.jsxs)("tr",{children:[Object(Ke.jsx)("td",{rowSpan:2,children:Object(Ke.jsx)("img",{className:e.logo,src:"./logo.png",alt:"logo"})}),Object(Ke.jsx)("td",{children:Object(Ke.jsx)(Re.a,{className:e.title,children:L})})]}),Object(Ke.jsx)("tr",{children:Object(Ke.jsx)("td",{className:e.subtitleCell,children:Object(Ke.jsxs)(Re.a,{className:e.subtitle,children:["by\xa0",Object(Ke.jsx)(ot.a,{href:"https://github.com/niklr",color:"inherit",target:"_blank",children:"github.com/niklr"})]})})})]})})})},ut=n(914),dt=n(24),pt=Object(qe.a)((function(e){return{heroContent:{backgroundColor:e.palette.background.paper,padding:e.spacing(1,0,1)},heroButtons:{marginTop:e.spacing(4)},item:{float:"left",marginRight:"10px"}}})),ht=function(){var e,t=pt(),n=Object(ut.a)(K).data;console.log(x.toJsonString(null===n||void 0===n?void 0:n.profile));var a=O(),r=C(),i=new dt.j({name:L}),c=function(){var e=Object(l.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.profile&&(t=Object(A.a)(Object(A.a)({},n.profile),{},{modifiedDate:new Date,useDarkMode:!n.profile.useDarkMode}),a.update(t)),e.next=3,i.requestSignPayload({signingType:dt.C.RAW,payload:R});case 3:r=e.sent,console.log("Signature: ".concat(r.signature));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(l.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"1234","edpktgWnT9AikgpespLXFuw1VzD9xXfiJcARGu5SkmYM2QWPMFHg3D",e.next=5,r.loginAsync("1234","edpktgWnT9AikgpespLXFuw1VzD9xXfiJcARGu5SkmYM2QWPMFHg3D");case 5:t=e.sent,console.log(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.timeout(3e3);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ke.jsx)("div",{className:t.heroContent,children:Object(Ke.jsx)(Be.a,{maxWidth:"sm",children:Object(Ke.jsxs)("div",{style:{textAlign:"center",paddingTop:"20px"},children:[Object(Ke.jsx)("p",{children:null===n||void 0===n||null===(e=n.profile)||void 0===e?void 0:e.modifiedDate.toString()}),Object(Ke.jsx)("div",{className:t.item,children:Object(Ke.jsx)(Me.a,{variant:"outlined",color:"primary",size:"small",onClick:c,children:"Test1"})}),Object(Ke.jsx)("div",{className:t.item,children:Object(Ke.jsx)(Me.a,{variant:"outlined",color:"primary",size:"small",onClick:o,children:"Test2"})}),Object(Ke.jsx)("div",{className:t.item,children:Object(Ke.jsx)(Xe,{color:"primary",callbackFn:u,autoFocus:!0,children:"Test3"})})]})})})},mt=(n(839),n(394)),jt=n.n(mt),bt={includeUI:{loadImage:{path:"",name:""},menu:["crop","flip","rotate","draw","shape","icon","text","filter"],initMenu:"text",uiSize:{width:"100%",height:"600px"},menuBarPosition:"left",theme:Object(A.a)({},{"common.bi.image":"https://uicdn.toast.com/toastui/img/tui-image-editor-bi.png","common.bisize.width":"251px","common.bisize.height":"21px","common.backgroundImage":"","common.backgroundColor":"#fff","common.border":"1px solid #c1c1c1","header.backgroundImage":"none","header.backgroundColor":"transparent","header.border":"0px","loadButton.backgroundColor":"#fff","loadButton.border":"1px solid #ddd","loadButton.color":"#222","loadButton.fontFamily":"'Noto Sans', sans-serif","loadButton.fontSize":"12px","downloadButton.backgroundColor":"#3f51b5","downloadButton.border":"1px solid #3f51b5","downloadButton.color":"#fff","downloadButton.fontFamily":"'Noto Sans', sans-serif","downloadButton.fontSize":"12px","menu.normalIcon.color":"#8a8a8a","menu.activeIcon.color":"#555555","menu.disabledIcon.color":"#434343","menu.hoverIcon.color":"#e9e9e9","menu.iconSize.width":"24px","menu.iconSize.height":"24px","submenu.normalIcon.color":"#8a8a8a","submenu.activeIcon.color":"#555555","submenu.iconSize.width":"32px","submenu.iconSize.height":"32px","submenu.backgroundColor":"transparent","submenu.partition.color":"#e5e5e5","submenu.normalLabel.color":"#858585","submenu.normalLabel.fontWeight":"normal","submenu.activeLabel.color":"#000","submenu.activeLabel.fontWeight":"normal","checkbox.border":"1px solid #ccc","checkbox.backgroundColor":"#fff","range.pointer.color":"#333","range.bar.color":"#ccc","range.subbar.color":"#606060","range.disabledPointer.color":"#d3d3d3","range.disabledBar.color":"rgba(85,85,85,0.06)","range.disabledSubbar.color":"rgba(51,51,51,0.2)","range.value.color":"#000","range.value.fontWeight":"normal","range.value.fontSize":"11px","range.value.border":"0","range.value.backgroundColor":"#f5f5f5","range.title.color":"#000","range.title.fontWeight":"lighter","colorpicker.button.border":"0px","colorpicker.button.backgroundColor":"#3f51b5","colorpicker.title.color":"#000"})},selectionStyle:{cornerColor:"#A9A9A9"},usageStatistics:!1},ft=function(e){var t;return bt.includeUI.loadImage={path:null!==(t=e.imageUrl)&&void 0!==t?t:"",name:"temp"},Object(a.useEffect)((function(){var e;null===(e=document.querySelector(".tui-image-editor-header-logo"))||void 0===e||e.remove();var t=document.querySelector(".tui-image-editor-help-menu");null===t||void 0===t||t.classList.remove("right"),null===t||void 0===t||t.classList.add("bottom")}),[]),Object(Ke.jsx)(jt.a,Object(A.a)({ref:e.editorRef},bt))},vt=function(){var e=Object(Le.g)().id,t=r.a.createRef(),n=(C(),oe()),a=function(){var e=Object(l.a)(s.a.mark((function e(){var a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.current.getInstance().toDataURL("image/png"),e.prev=1,e.next=4,x.imageUrlToBlob(a);case 4:return r=e.sent,e.next=7,n.uploadAsync(r);case 7:i=e.sent,console.log(i),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(){return e.apply(this,arguments)}}();return Object(Ke.jsxs)(Ke.Fragment,{children:[Object(Ke.jsxs)("p",{children:["Hello ",e]}),Object(Ke.jsx)(ft,{editorRef:t}),Object(Ke.jsx)("button",{onClick:a,children:"Click!"})]})},gt=n(405),Ot=n(903),xt=n(152),yt=n.n(xt),wt=Object(qe.a)((function(e){return{warning:{color:function(e){return e.color},backgroundColor:function(e){return e.backgroundColor},padding:"15px",textAlign:"center"}}})),kt=function(e){var t,n,a="#000000",r="#f2f2f2";switch(e.type){case"warning":a="#611a15",r="#fdecea"}var i=wt({color:null!==(t=e.color)&&void 0!==t?t:a,backgroundColor:null!==(n=e.backgroundColor)&&void 0!==n?n:r});return e.error&&console.log(x.toJsonString(e.error)),Object(Ke.jsx)(gt.a,{children:Object(Ke.jsx)("div",{className:i.warning,children:Object(Ke.jsx)(Re.a,{children:e.message})})})},_t=Object($.a)(Oe||(Oe=Object(q.a)(["\n  query GetTemplate($id: ID!) {\n    template(id: $id) {\n      _id\n      chainId\n      entityId\n      createdDate\n      modifiedDate\n      owner\n      description\n      imageUrl\n    }\n  }\n"]))),It=Object($.a)(xe||(xe=Object(q.a)(["\n  query GetTemplateByEntityId($id: ID!) {\n    templateByEntityId(id: $id) {\n      _id\n      chainId\n      entityId\n      createdDate\n      modifiedDate\n      owner\n      description\n      imageUrl\n    }\n  }\n"]))),St=function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!x.isNullOrWhitespace(n)){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,t.query({query:_t,variables:{id:n},fetchPolicy:"network-only"});case 4:return a=e.sent,e.abrupt("return",a.data.template);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nt=Object($.a)(ye||(ye=Object(q.a)(["\n  query GetDocuments($input: DocumentsFilterRequest!) {\n    documents(input: $input) {\n      totalCount\n      cursor\n      hasMore\n      documents {\n        _id\n        chainId\n        tokenChainId\n        templateId\n        createdDate\n        modifiedDate\n        owner\n        holder\n        name\n        description\n        imageUrl\n      }\n    }\n  }\n"]))),Ct=Object($.a)(we||(we=Object(q.a)(["\n  query GetDocument($id: ID!) {\n    document(id: $id) {\n      _id\n      chainId\n      tokenChainId\n      templateId\n      createdDate\n      modifiedDate\n      owner\n      holder\n      name\n      description\n      imageUrl\n    }\n  }\n"]))),At=n(899),Et=n(900),Dt=n(901),Tt=n(902),Pt=Object(qe.a)((function(e){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),Ut=function(e){var t=Pt();return Object(Ke.jsxs)(At.a,{className:t.card,children:[Object(Ke.jsx)(Et.a,{className:t.cardMedia,image:e.document.imageUrl,title:e.document.name}),Object(Ke.jsxs)(Dt.a,{className:t.cardContent,children:[Object(Ke.jsx)(Re.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.document.name}),Object(Ke.jsx)(Re.a,{children:e.document.description})]}),Object(Ke.jsx)(Tt.a,{children:Object(Ke.jsx)(Me.a,{size:"small",color:"primary",component:ze.b,to:"/documents/"+e.document._id,children:"View"})})]})},zt=Object(qe.a)((function(e){return{root:{width:"100%",minHeight:"400px",marginTop:"50px"}}})),Lt=function(){var e,t,n,a,i,c,o,u,p,h,m,j,b,f,v=zt(),g=Object(d.c)().activeAccount,O=Object(Le.g)().id,x=r.a.useState(!1),y=Object(We.a)(x,2),w=y[0],k=y[1],_=Object(ut.a)(G,{variables:{id:O},fetchPolicy:"network-only"}),I=Object(ut.a)(It,{variables:{id:String(null===(e=_.data)||void 0===e||null===(t=e.entity)||void 0===t?void 0:t._id)},fetchPolicy:"network-only",skip:_.loading||!(null===(n=_.data)||void 0===n||null===(a=n.entity)||void 0===a?void 0:a._id)}),S=Object(ut.a)(Nt,{variables:{input:{templateId:null===(i=I.data)||void 0===i||null===(c=i.templateByEntityId)||void 0===c?void 0:c._id}},fetchPolicy:"network-only",skip:I.loading||!(null===(o=I.data)||void 0===o||null===(u=o.templateByEntityId)||void 0===u?void 0:u._id)}),N=_.error||I.error||S.error,C=_.loading||I.loading||S.loading,A=function(){var e,t;return(null===g||void 0===g?void 0:g.address)===(null===(e=_.data)||void 0===e||null===(t=e.entity)||void 0===t?void 0:t.owner)},E=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.refetch();case 2:return e.next=4,I.refetch();case 4:return e.next=6,S.refetch();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return C?Object(Ke.jsx)(kt,{message:"Loading...",type:"default"}):N?Object(Ke.jsx)(kt,{message:N.graphQLErrors[0].message,error:N,type:"warning"}):(null===(p=_.data)||void 0===p?void 0:p.entity)?Object(Ke.jsxs)(gt.a,{className:v.root,children:[Object(Ke.jsxs)("div",{className:"px-4",children:[Object(Ke.jsxs)(Fe.a,{container:!0,spacing:0,className:"mt-3",children:[Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsx)("div",{className:"d-flex",children:Object(Ke.jsxs)("div",{className:"text-center",children:[Object(Ke.jsx)(Re.a,{variant:"h6",component:"h2",children:null!==(h=null===(m=S.data)||void 0===m?void 0:m.documents.totalCount)&&void 0!==h?h:0}),Object(Ke.jsx)(Re.a,{color:"textSecondary",children:"Diplomas"})]})})}),Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsx)("div",{className:"text-end",children:Object(Ke.jsx)("div",{className:"text-end",children:A()&&Object(Ke.jsx)(Me.a,{size:"small",color:"primary",onClick:function(){return k(!0)},children:"Edit"})})})})]}),Object(Ke.jsxs)("div",{className:"text-center border-bottom pb-4",children:[Object(Ke.jsx)(Re.a,{variant:"h4",gutterBottom:!0,children:_.data.entity.name}),Object(Ke.jsx)(Re.a,{variant:"subtitle1",gutterBottom:!0,children:_.data.entity.description})]}),Object(Ke.jsxs)(Fe.a,{container:!0,spacing:0,className:"mt-3",children:[Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsx)(Re.a,{variant:"h5",className:"mt-1",children:"Diplomas"})}),Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsxs)("div",{className:"text-end",children:[Object(Ke.jsx)(Ot.a,{"aria-label":"refresh",onClick:function(){return E()},children:Object(Ke.jsx)(yt.a,{fontSize:"small"})}),A()&&Object(Ke.jsxs)(Ke.Fragment,{children:[Object(Ke.jsx)(Me.a,{size:"small",color:"primary",className:"me-3",component:ze.b,to:"/entities/"+_.data.entity._id+"/template",children:"Edit template"}),Object(Ke.jsx)(Me.a,{size:"small",color:"primary",variant:"contained",component:ze.b,to:"/entities/"+_.data.entity._id+"/mint",children:"Mint diploma"})]})]})})]}),function(){var e,t,n,a,r,i;return(null===(e=S.data)||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)&&(null===(a=S.data)||void 0===a||null===(r=a.documents)||void 0===r||null===(i=r.documents)||void 0===i?void 0:i.length)>0}()?Object(Ke.jsx)("div",{className:"mt-3 mb-4",children:Object(Ke.jsx)(Fe.a,{container:!0,spacing:4,children:null===S||void 0===S||null===(j=S.data)||void 0===j||null===(b=j.documents)||void 0===b||null===(f=b.documents)||void 0===f?void 0:f.map((function(e){return Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ke.jsx)(Ut,{document:e})},e._id)}))})}):Object(Ke.jsx)("div",{className:"alert alert-primary mt-5",role:"alert",children:"No diplomas found."})]}),Object(Ke.jsx)(rt,{open:w,onClose:function(){k(!1)},entity:_.data.entity})]}):Object(Ke.jsx)(kt,{message:"Could not find the specified entity.",type:"warning"})},Wt=Object(qe.a)((function(e){return{card:{height:"100%",display:"flex",flexDirection:"column"},cardMedia:{paddingTop:"56.25%"},cardContent:{flexGrow:1}}})),Bt=function(e){var t=Wt(),n=r.a.useState(!1),a=Object(We.a)(n,2),i=a[0],c=a[1];return Object(Ke.jsxs)(At.a,{className:t.card,children:[!!e.entity.imageUrl&&Object(Ke.jsx)(Et.a,{className:t.cardMedia,image:e.entity.imageUrl,title:e.entity.name}),Object(Ke.jsxs)(Dt.a,{className:t.cardContent,children:[Object(Ke.jsx)(Re.a,{gutterBottom:!0,variant:"h5",component:"h2",children:e.entity.name}),Object(Ke.jsx)(Re.a,{children:e.entity.description})]}),Object(Ke.jsxs)(Tt.a,{children:[Object(Ke.jsx)(Me.a,{size:"small",color:"primary",component:ze.b,to:"/entities/"+e.entity._id,children:"View"}),e.activeAccount===e.entity.owner&&Object(Ke.jsx)(Me.a,{size:"small",color:"primary",onClick:function(){return c(!0)},children:"Edit"})]}),Object(Ke.jsx)(rt,{open:i,onClose:function(){c(!1)},entity:e.entity})]})},Rt=Object(qe.a)((function(e){return{title:{fontWeight:500,marginBottom:20,textAlign:"center"},refreshButton:{float:"right"},cardGrid:{paddingTop:e.spacing(8),paddingBottom:e.spacing(8)}}})),Ft=function(){var e,t,n,a=Rt(),r=Object(d.c)().activeAccount,i=Object(ut.a)(H,{variables:{input:{selected:!0}},fetchPolicy:"network-only"}),c=i.loading&&!i.data;return Object(Ke.jsxs)(Be.a,{className:a.cardGrid,maxWidth:"md",children:[Object(Ke.jsxs)(Re.a,{className:a.title,children:["Featured institutes",Object(Ke.jsx)(Ot.a,{className:a.refreshButton,"aria-label":"refresh",onClick:function(){return i.refetch()},children:Object(Ke.jsx)(yt.a,{fontSize:"small"})})]}),Object(Ke.jsx)(Re.a,{children:c&&Object(Ke.jsx)(Ke.Fragment,{children:"Loading..."})}),Object(Ke.jsx)(Fe.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center",children:null===(e=i.data)||void 0===e||null===(t=e.entities)||void 0===t||null===(n=t.entities)||void 0===n?void 0:n.map((function(e){return Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ke.jsx)(Bt,{entity:e,activeAccount:null===r||void 0===r?void 0:r.address})},e._id)}))})]})},Mt=Object($.a)(ke||(ke=Object(q.a)(["\n  mutation SaveTemplate($input: SaveTemplateRequest!) {\n    saveTemplate(input: $input) {\n      success\n      message\n      template {\n        _id\n        chainId\n        entityId\n        createdDate\n        modifiedDate\n        owner\n        description\n        imageUrl\n      }\n    }\n  }\n"]))),qt=new(function(){function e(){Object(h.a)(this,e),this._apollo=void 0,this._ipfs=void 0,this._tezos=void 0,this._apollo=ae(),this._ipfs=oe(),this._tezos=Ue()}return Object(m.a)(e,[{key:"saveAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n){var a,r,i,c,o,l,u,d,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.notNull(t,"request"),S.notNullOrWhiteSpace(t.entityId,"entityId","Please provide an entity identifier."),S.notNullOrWhiteSpace(t.description,"description","Please provide a description."),S.notNullOrWhiteSpace(t.imageUrl,"imageUrl","Please provide an image."),console.log(t),!x.isNullOrWhitespace(t.chainId)){e.next=17;break}return e.next=8,J(this._apollo,t.entityId);case 8:if(o=e.sent){e.next=11;break}throw new Error("Entity not found.");case 11:return e.next=13,this._tezos.createTemplateAsync(o.chainId);case 13:l=e.sent,S.notNullOrWhiteSpace(l,"tezosId","Template could not be created on chain."),t.chainId=String(l),n(t);case 17:if(!t.imageUrl.startsWith("data:")){e.next=26;break}return e.next=20,x.imageUrlToBlob(t.imageUrl);case 20:return u=e.sent,e.next=23,this._ipfs.uploadAsync(u);case 23:d=e.sent,t=Object(A.a)(Object(A.a)({},t),{},{imageUrl:d.url}),n(t);case 26:return e.next=28,this._apollo.mutate({mutation:Mt,variables:{input:t},refetchQueries:[It]});case 28:return p=e.sent,console.log(null===(a=p.data)||void 0===a?void 0:a.saveTemplate),e.abrupt("return",null===(r=p.data)||void 0===r||null===(i=r.saveTemplate)||void 0===i||null===(c=i.template)||void 0===c?void 0:c._id);case 31:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}()),$t=Object(qe.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(2)}}}})),Ht=function(e){var t=$t(),n=Object(p.b)().enqueueSnackbar,r=qt,i=Object(a.useState)(!1),c=Object(We.a)(i,2),o=c[0],u=c[1],d=Object(Le.f)(),h=Object(a.useState)(e.template),m=Object(We.a)(h,2),j=m[0],b=m[1],f=!!e.template.id,v=function(){u(!1),e.onClose()};Object(a.useEffect)((function(){u(e.open),b(e.template)}),[e.open,e.template]);var g=function(){var t=Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,S.maxLength(j.description,"description",M),t.next=4,r.saveAsync(Object(A.a)(Object(A.a)({},j),{},{imageUrl:e.getImageDataUrl()}),(function(e){b(e),console.log(e)}));case 4:v(),setTimeout((function(){d.push("/entities/".concat(j.entityId))}),100),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n(nt.formatSnackbarMessage(t.t0));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();return Object(Ke.jsxs)($e.a,{fullWidth:!0,maxWidth:"sm",open:o,keepMounted:!0,onClose:v,className:t.root,children:[Object(Ke.jsxs)(He.a,{children:[f?"Edit":"Create"," template"]}),Object(Ke.jsx)(Ge.a,{children:Object(Ke.jsx)(Je.a,{label:"Description",multiline:!0,fullWidth:!0,autoComplete:"new-password",rows:4,value:j.description,variant:"outlined",onChange:function(e){return b(Object(A.a)(Object(A.a)({},j),{},{description:e.target.value}))}})}),Object(Ke.jsxs)(Ve.a,{children:[Object(Ke.jsx)(Me.a,{onClick:v,color:"primary",children:"Close"}),Object(Ke.jsx)(Xe,{color:"primary",callbackFn:g,autoFocus:!0,children:f?"Save":"Create"})]})]})},Gt=Object(qe.a)((function(e){return{root:{width:"100%",position:"relative"},saveButton:{position:"absolute",top:"0",right:"0",marginTop:"5px",minWidth:"130px"}}})),Jt=function(){var e,t,n,a,i,c,o,s=Gt(),l=Object(Le.g)().id,u=r.a.createRef(),d=r.a.useState(!1),p=Object(We.a)(d,2),h=p[0],m=p[1],j=Object(ut.a)(It,{variables:{id:l},fetchPolicy:"network-only"}),b=j.data,f=j.loading,v=j.error;return f?Object(Ke.jsx)(kt,{message:"Loading...",type:"default"}):v?Object(Ke.jsx)(kt,{message:v.graphQLErrors[0].message,error:v,type:"warning"}):Object(Ke.jsxs)("div",{className:s.root,children:[Object(Ke.jsx)("div",{className:"text-center",children:Object(Ke.jsx)(Re.a,{variant:"h4",gutterBottom:!0,children:"Edit template"})}),Object(Ke.jsx)("div",{className:s.saveButton,children:Object(Ke.jsx)(Me.a,{variant:"contained",size:"medium",color:"primary",fullWidth:!0,onClick:function(){return m(!0)},children:"Save"})}),Object(Ke.jsx)("div",{className:"text-center",children:Object(Ke.jsx)(ft,{editorRef:u,imageUrl:null===b||void 0===b||null===(e=b.templateByEntityId)||void 0===e?void 0:e.imageUrl})}),Object(Ke.jsx)(Ht,{open:h,onClose:function(){m(!1)},template:{id:null!==(t=null===b||void 0===b||null===(n=b.templateByEntityId)||void 0===n?void 0:n._id)&&void 0!==t?t:"",chainId:null!==(a=null===b||void 0===b||null===(i=b.templateByEntityId)||void 0===i?void 0:i.chainId)&&void 0!==a?a:"",entityId:l,description:null!==(c=null===b||void 0===b||null===(o=b.templateByEntityId)||void 0===o?void 0:o.description)&&void 0!==c?c:"",imageUrl:""},getImageDataUrl:function(){return u.current.getInstance().toDataURL("image/png")}})]})},Vt=n(104),Qt=Vt.a.div(_e||(_e=Object(q.a)(["\n  padding-bottom: ",";\n  padding-top: 10px;\n  padding-left: 24px;\n  padding-right: 24px;\n  text-align: right;\n"])),(function(e){return e.paddingBottomSmall?"10px":"30px"})),Kt=function(){return Object(Ke.jsx)(Ke.Fragment,{children:Object(Ke.jsx)(Qt,{paddingBottomSmall:!0,children:Object(Ke.jsxs)(Re.a,{children:["v","0.1.0"]})})})},Zt=n(904),Xt=n(905),Yt=n(906),en=Vt.a.div(Ie||(Ie=Object(q.a)(["\n  flex-grow: 1;\n"]))),tn=Object(Vt.a)(Re.a)(Se||(Se=Object(q.a)(["\n  flex-grow: 1;\n  margin-left: 10px !important;\n"]))),nn=function(e){var t=Object(p.b)().enqueueSnackbar,n=Object(d.c)(),a=n.client,r=n.connected,i=n.disconnect,c=n.activeAccount,o=n.connect,u=ae(),h=C();null===a||void 0===a||a.subscribeToEvent(dt.e.ACTIVE_ACCOUNT_SET,(function(e){if(console.log("".concat(dt.e.ACTIVE_ACCOUNT_SET," triggered: "),e),e){var t={address:e.address,publicKey:e.publicKey};localStorage.setItem(W,JSON.stringify(t))}}));var m=function(){var e=Object(l.a)(s.a.mark((function e(){var n,a,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:if(!(n=e.sent)){e.next=21;break}return console.log(n),e.prev=5,a=new dt.j({name:L}),e.next=9,a.requestSignPayload({signingType:dt.C.RAW,payload:R});case 9:return r=e.sent,e.next=12,h.loginAsync(r.signature,n.publicKey);case 12:i=e.sent,localStorage.setItem(B,i),e.next=21;break;case 16:return e.prev=16,e.t0=e.catch(5),t(nt.formatSnackbarMessage(e.t0)),e.next=21,j();case 21:case"end":return e.stop()}}),e,null,[[5,16]])})));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:localStorage.removeItem(W),localStorage.removeItem(B),u.clearStore(),window.location.reload();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(Ke.jsx)(en,{children:Object(Ke.jsx)(Zt.a,{position:"static",children:Object(Ke.jsxs)(Xt.a,{children:[Object(Ke.jsx)("img",{src:"./logo_white.png",alt:"logo",width:"30"}),Object(Ke.jsx)(tn,{variant:"h6",children:Object(Ke.jsx)(ot.a,{color:"inherit",component:ze.b,to:"/",children:L})}),c&&Object(Ke.jsxs)(Ke.Fragment,{children:[Object(Ke.jsx)(Yt.a,{style:{color:"white"},children:"person_outline"}),Object(Ke.jsx)(Re.a,{variant:"caption",children:Object(Ke.jsx)(ot.a,{color:"inherit",component:ze.b,to:"/account/"+c.address,children:c.address})})]}),r?Object(Ke.jsx)(Me.a,{color:"inherit",onClick:j,children:"Logout"}):Object(Ke.jsx)(Me.a,{color:"inherit",onClick:m,children:"Login"})]})})})},an=n(203),rn=["children"],cn=Vt.a.div(Ne||(Ne=Object(q.a)(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  align-items: center;\n  padding-bottom: 15px;\n  padding-top: 30px;\n  overflow: auto;\n  overflow-x: hidden;\n"]))),on=Vt.a.div(Ce||(Ce=Object(q.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]))),sn=function(e){var t=e.children,n=Object(an.a)(e,rn);return Object(Ke.jsx)(cn,Object(A.a)(Object(A.a)({},n),{},{children:Object(Ke.jsx)(Be.a,{maxWidth:"lg",children:Object(Ke.jsx)(on,{children:t})})}))},ln=["children"],un=Vt.a.div(Ae||(Ae=Object(q.a)(["\n  display: flex;\n  flex-direction: column;\n  height: 100vh;\n"]))),dn=function(e){var t=e.children,n=Object(an.a)(e,ln);return Object(Ke.jsx)(un,Object(A.a)(Object(A.a)({},n),{},{children:t}))},pn=Object($.a)(Ee||(Ee=Object(q.a)(["\n  mutation SaveDocument($input: SaveDocumentRequest!) {\n    saveDocument(input: $input) {\n      success\n      message\n      document {\n        _id\n        chainId\n        templateId\n        createdDate\n        modifiedDate\n        owner\n        holder\n        name\n        description\n        imageUrl\n      }\n    }\n  }\n"]))),hn=new(function(){function e(){Object(h.a)(this,e),this._apollo=void 0,this._ipfs=void 0,this._tezos=void 0,this._apollo=ae(),this._ipfs=oe(),this._tezos=Ue()}return Object(m.a)(e,[{key:"saveAsync",value:function(){var e=Object(l.a)(s.a.mark((function e(t,n,a){var r,i,c,o,l,u,d,p,h,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S.notNull(n,"request"),S.notNullOrWhiteSpace(n.holder,"holder","Please provide a holder address."),S.notNullOrWhiteSpace(n.description,"description","Please provide a description."),S.notNullOrWhiteSpace(n.imageUrl,"imageUrl","Please provide an image."),console.log(n),!n.imageUrl.startsWith("data:")){e.next=14;break}return e.next=8,x.imageUrlToBlob(n.imageUrl);case 8:return l=e.sent,e.next=11,this._ipfs.uploadAsync(l);case 11:u=e.sent,n=Object(A.a)(Object(A.a)({},n),{},{imageUrl:u.url}),a(n);case 14:if(!x.isNullOrWhitespace(n.chainId)){e.next=29;break}return e.next=17,J(this._apollo,t);case 17:if(d=e.sent){e.next=20;break}throw new Error("Entity not found.");case 20:return e.next=22,St(this._apollo,n.templateId);case 22:return p=e.sent,e.next=25,this._tezos.createDocument(n.holder,d.chainId,n.imageUrl,null===p||void 0===p?void 0:p.chainId);case 25:h=e.sent,S.notNullOrWhiteSpace(h,"tezosId","Document could not be created on chain."),n.chainId=String(h),a(n);case 29:return e.next=31,this._apollo.mutate({mutation:pn,variables:{input:n},refetchQueries:[It]});case 31:return m=e.sent,console.log(null===(r=m.data)||void 0===r?void 0:r.saveDocument),e.abrupt("return",null===(i=m.data)||void 0===i||null===(c=i.saveDocument)||void 0===c||null===(o=c.document)||void 0===o?void 0:o._id);case 34:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}()),mn=Object(qe.a)((function(e){return{root:{"& .MuiTextField-root":{marginBottom:e.spacing(2)}}}})),jn=function(e){var t=mn(),n=Object(p.b)().enqueueSnackbar,r=hn,i=Object(a.useState)(!1),c=Object(We.a)(i,2),o=c[0],u=c[1],h=Object(Le.f)(),m=Object(d.c)().activeAccount,j=Object(a.useState)(e.document),b=Object(We.a)(j,2),f=b[0],v=b[1],g=function(){u(!1),e.onClose()};Object(a.useEffect)((function(){u(e.open),v(e.document)}),[e.open,e.document]);var O=function(){var t=Object(l.a)(s.a.mark((function t(){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null===m||void 0===m?void 0:m.address){t.next=3;break}throw new Error("Please connect your wallet.");case 3:return S.maxLength(f.name,"name",F),S.maxLength(f.description,"description",M),t.next=7,r.saveAsync(e.entityId,Object(A.a)(Object(A.a)({},f),{},{imageUrl:e.getImageDataUrl()}),(function(e){v(e),console.log(e)}));case 7:a=t.sent,g(),setTimeout((function(){h.push("/documents/".concat(a))}),100),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),n(nt.formatSnackbarMessage(t.t0));case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return Object(Ke.jsxs)($e.a,{fullWidth:!0,maxWidth:"sm",open:o,keepMounted:!0,onClose:g,className:t.root,children:[Object(Ke.jsx)(He.a,{children:"Mint diploma"}),Object(Ke.jsxs)(Ge.a,{children:[Object(Ke.jsx)(Je.a,{label:"Name",fullWidth:!0,autoComplete:"new-password",value:f.name,onChange:function(e){return v(Object(A.a)(Object(A.a)({},f),{},{name:e.target.value}))}}),Object(Ke.jsx)(Je.a,{label:"Description",multiline:!0,fullWidth:!0,autoComplete:"new-password",rows:4,value:f.description,variant:"outlined",onChange:function(e){return v(Object(A.a)(Object(A.a)({},f),{},{description:e.target.value}))}}),Object(Ke.jsx)(Je.a,{label:"Holder address",placeholder:"tz1aFCW65xKy...",fullWidth:!0,autoComplete:"new-password",value:f.holder,onChange:function(e){return v(Object(A.a)(Object(A.a)({},f),{},{holder:e.target.value}))}})]}),Object(Ke.jsxs)(Ve.a,{children:[Object(Ke.jsx)(Me.a,{onClick:g,color:"primary",children:"Close"}),Object(Ke.jsx)(Xe,{color:"primary",callbackFn:O,autoFocus:!0,children:"Confirm"})]})]})},bn=Object(qe.a)((function(e){return{root:{width:"100%",position:"relative"},saveButton:{position:"absolute",top:"0",right:"0",marginTop:"5px",minWidth:"130px"}}})),fn=function(){var e,t,n,a,i,c=bn(),o=Object(Le.g)().id,s=r.a.createRef(),l=r.a.useState(!1),u=Object(We.a)(l,2),d=u[0],p=u[1],h=Object(ut.a)(It,{variables:{id:o},fetchPolicy:"network-only"}),m=h.data,j=h.loading,b=h.error;console.log(m);return j?Object(Ke.jsx)(kt,{message:"Loading...",type:"default"}):b?Object(Ke.jsx)(kt,{message:b.graphQLErrors[0].message,error:b,type:"warning"}):Object(Ke.jsxs)("div",{className:c.root,children:[Object(Ke.jsx)("div",{className:"text-center",children:Object(Ke.jsx)(Re.a,{variant:"h4",gutterBottom:!0,children:"Mint diploma"})}),Object(Ke.jsx)("div",{className:c.saveButton,children:Object(Ke.jsx)(Me.a,{variant:"contained",size:"medium",color:"primary",fullWidth:!0,onClick:function(){return p(!0)},children:"Mint"})}),Object(Ke.jsx)("div",{className:"text-center",children:Object(Ke.jsx)(ft,{editorRef:s,imageUrl:null===m||void 0===m||null===(e=m.templateByEntityId)||void 0===e?void 0:e.imageUrl})}),Object(Ke.jsx)(jn,{open:d,onClose:function(){p(!1)},entityId:o,document:{chainId:"",templateId:null!==(t=null===m||void 0===m||null===(n=m.templateByEntityId)||void 0===n?void 0:n._id)&&void 0!==t?t:"",holder:"",name:"",description:null!==(a=null===m||void 0===m||null===(i=m.templateByEntityId)||void 0===i?void 0:i.description)&&void 0!==a?a:"",imageUrl:""},getImageDataUrl:function(){return s.current.getInstance().toDataURL("image/png")}})]})},vn=Object(qe.a)((function(e){return{root:{width:"100%",minHeight:"400px",marginTop:"50px"}}})),gn=function(){var e,t,n,a,r,i,c,o,u,p,h=vn(),m=Object(Le.g)().id,j=Object(d.c)().activeAccount,b=Object(ut.a)(Nt,{variables:{input:{holder:m}},fetchPolicy:"network-only"}),f=Object(ut.a)(H,{variables:{input:{owner:m}},fetchPolicy:"network-only"}),v=b.error||f.error,g=b.loading||f.loading,O=function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.refetch();case 2:return e.next=4,f.refetch();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return g?Object(Ke.jsx)(kt,{message:"Loading...",type:"default"}):v?Object(Ke.jsx)(kt,{message:v.graphQLErrors[0].message,error:v,type:"warning"}):Object(Ke.jsx)(gt.a,{className:h.root,children:Object(Ke.jsxs)("div",{className:"px-4",children:[Object(Ke.jsxs)(Fe.a,{container:!0,spacing:0,className:"mt-3",children:[Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsxs)("div",{className:"d-flex",children:[Object(Ke.jsxs)("div",{className:"text-center me-3",children:[Object(Ke.jsx)(Re.a,{variant:"h6",component:"h2",children:null!==(e=null===(t=b.data)||void 0===t?void 0:t.documents.totalCount)&&void 0!==e?e:0}),Object(Ke.jsx)(Re.a,{color:"textSecondary",children:"Diplomas"})]}),Object(Ke.jsxs)("div",{className:"text-center",children:[Object(Ke.jsx)(Re.a,{variant:"h6",component:"h2",children:null!==(n=null===(a=f.data)||void 0===a?void 0:a.entities.totalCount)&&void 0!==n?n:0}),Object(Ke.jsx)(Re.a,{color:"textSecondary",children:"Institutes"})]})]})}),Object(Ke.jsx)(Fe.a,{item:!0,xs:6,children:Object(Ke.jsx)("div",{className:"text-end",children:Object(Ke.jsx)("div",{className:"text-end",children:Object(Ke.jsx)(Ot.a,{"aria-label":"refresh",onClick:function(){return O()},children:Object(Ke.jsx)(yt.a,{fontSize:"small"})})})})})]}),Object(Ke.jsxs)("div",{className:"text-center border-bottom pb-4",children:[Object(Ke.jsxs)(Re.a,{variant:"h4",gutterBottom:!0,children:[(null===j||void 0===j?void 0:j.address)===m?"My":""," Diplomas"]}),Object(Ke.jsx)(Re.a,{variant:"subtitle1",gutterBottom:!0,children:null===j||void 0===j?void 0:j.address})]}),function(){var e,t,n,a,r,i;return(null===(e=b.data)||void 0===e||null===(t=e.documents)||void 0===t||null===(n=t.documents)||void 0===n?void 0:n.length)&&(null===(a=b.data)||void 0===a||null===(r=a.documents)||void 0===r||null===(i=r.documents)||void 0===i?void 0:i.length)>0}()?Object(Ke.jsx)("div",{className:"my-5",children:Object(Ke.jsx)(Fe.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center",children:null===b||void 0===b||null===(r=b.data)||void 0===r||null===(i=r.documents)||void 0===i||null===(c=i.documents)||void 0===c?void 0:c.map((function(e){return Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ke.jsx)(Ut,{document:e})},e._id)}))})}):Object(Ke.jsx)("div",{className:"alert alert-primary mt-5",role:"alert",children:"No diplomas found."}),Object(Ke.jsx)("div",{className:"text-center border-bottom pt-4 pb-2",children:Object(Ke.jsxs)(Re.a,{variant:"h4",gutterBottom:!0,children:[(null===j||void 0===j?void 0:j.address)===m?"My":""," Institutes"]})}),function(){var e,t,n,a,r,i;return(null===(e=f.data)||void 0===e||null===(t=e.entities)||void 0===t||null===(n=t.entities)||void 0===n?void 0:n.length)&&(null===(a=f.data)||void 0===a||null===(r=a.entities)||void 0===r||null===(i=r.entities)||void 0===i?void 0:i.length)>0}()?Object(Ke.jsx)("div",{className:"my-5",children:Object(Ke.jsx)(Fe.a,{container:!0,spacing:4,justifyContent:"center",alignItems:"center",children:null===f||void 0===f||null===(o=f.data)||void 0===o||null===(u=o.entities)||void 0===u||null===(p=u.entities)||void 0===p?void 0:p.map((function(e){return Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:6,md:4,children:Object(Ke.jsx)(Bt,{entity:e,activeAccount:null===j||void 0===j?void 0:j.address})},e._id)}))})}):Object(Ke.jsx)("div",{className:"alert alert-primary mt-5",role:"alert",children:"No institutes found."})]})})},On=n(910),xn=n(134),yn=n.n(xn),wn=function(){function e(){Object(h.a)(this,e),yn.a.locale(navigator.language)}return Object(m.a)(e,[{key:"setLocale",value:function(e){yn.a.locale(e)}},{key:"get",value:function(){return yn()()}},{key:"getFromUnix",value:function(e){return yn.a.unix(e)}},{key:"getFromMilliseconds",value:function(e){return yn()(e,"x")}},{key:"getLocal",value:function(e){return yn.a.utc(e).local()}},{key:"getLocalTime",value:function(e){return this.getLocal(e).format("LTS")}},{key:"getLocalDate",value:function(e){return this.getLocal(e).format("L")}},{key:"getLocalFormatted",value:function(e){return this.getLocalTime(e)+" "+this.getLocalDate(e)}},{key:"getLocalReverseFormatted",value:function(e){return this.getLocalDate(e)+" "+this.getLocalTime(e)}}]),e}(),kn=Object(qe.a)((function(e){return{root:{width:"100%",minHeight:"400px",marginTop:"50px"}}})),_n=function(){var e,t,n,a,r,i,c,o,s,l,u,d,p,h,m,j=kn(),b=Object(Le.g)().id,f=new wn,v=Object(ut.a)(Ct,{variables:{id:b},fetchPolicy:"network-only"}),g=Object(ut.a)(_t,{variables:{id:String(null===(e=v.data)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.templateId)},fetchPolicy:"network-only",skip:v.loading||!(null===(n=v.data)||void 0===n||null===(a=n.document)||void 0===a?void 0:a.templateId)}),O=Object(ut.a)(G,{variables:{id:String(null===(r=g.data)||void 0===r||null===(i=r.template)||void 0===i?void 0:i.entityId)},fetchPolicy:"network-only",skip:g.loading||!(null===(c=g.data)||void 0===c||null===(o=c.template)||void 0===o?void 0:o.entityId)}),x=O.error;return O.loading?Object(Ke.jsx)(kt,{message:"Loading...",type:"default"}):x?Object(Ke.jsx)(kt,{message:x.graphQLErrors[0].message,error:x,type:"warning"}):(null===(s=v.data)||void 0===s?void 0:s.document)?Object(Ke.jsx)(gt.a,{className:j.root,children:Object(Ke.jsxs)("div",{className:"px-4",children:[Object(Ke.jsxs)("div",{className:"text-center border-bottom mt-3 pb-4",children:[Object(Ke.jsx)(Re.a,{variant:"h4",gutterBottom:!0,children:v.data.document.name}),Object(Ke.jsx)(Re.a,{variant:"subtitle1",gutterBottom:!0,children:v.data.document.description})]}),Object(Ke.jsxs)(Fe.a,{container:!0,spacing:0,justifyContent:"center",alignItems:"center",className:"mt-3",children:[Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:8,children:Object(Ke.jsx)("div",{className:"text-center mt-4",children:Object(Ke.jsxs)("figure",{className:"figure",children:[Object(Ke.jsx)("img",{src:v.data.document.imageUrl,className:"figure-img img-fluid",alt:v.data.document.name}),Object(Ke.jsxs)("figcaption",{className:"figure-caption text-end",children:["issued by\xa0",(null===(l=O.data)||void 0===l?void 0:l.entity)&&Object(Ke.jsx)("b",{children:Object(Ke.jsx)(ot.a,{color:"inherit",component:ze.b,to:"/entities/".concat(null===(u=O.data)||void 0===u||null===(d=u.entity)||void 0===d?void 0:d._id),children:null===(p=O.data)||void 0===p||null===(h=p.entity)||void 0===h?void 0:h.name})})]})]})})}),Object(Ke.jsx)(Fe.a,{item:!0,xs:12,sm:4,children:Object(Ke.jsxs)("div",{style:{whiteSpace:"nowrap"},children:[Object(Ke.jsxs)(On.a,{my:2,component:"div",textOverflow:"ellipsis",overflow:"hidden",children:[Object(Ke.jsx)("b",{children:"Date"})," ",(m=v.data.document.createdDate,f.getLocalReverseFormatted(f.getFromMilliseconds(m)))]}),Object(Ke.jsxs)(On.a,{my:2,component:"div",textOverflow:"ellipsis",overflow:"hidden",children:[Object(Ke.jsx)("b",{children:"Holder"})," ",Object(Ke.jsx)(ot.a,{color:"inherit",component:ze.b,to:"/account/".concat(v.data.document.holder),children:v.data.document.holder})]})]})})]})]})}):Object(Ke.jsx)(kt,{message:"Could not find the specified document.",type:"warning"})},In=function(e){return Object(Ke.jsx)(Ke.Fragment,{children:Object(Ke.jsx)(dn,{children:Object(Ke.jsxs)(ze.a,{children:[Object(Ke.jsx)(nn,{}),Object(Ke.jsx)(sn,{children:Object(Ke.jsxs)(Le.c,{children:[Object(Ke.jsx)(Le.a,{path:"/items/:id",children:Object(Ke.jsx)(vt,{})}),Object(Ke.jsx)(Le.a,{path:"/entities/:id/template",children:Object(Ke.jsx)(Jt,{})}),Object(Ke.jsx)(Le.a,{path:"/entities/:id/mint",children:Object(Ke.jsx)(fn,{})}),Object(Ke.jsx)(Le.a,{path:"/entities/:id",children:Object(Ke.jsx)(Lt,{})}),Object(Ke.jsx)(Le.a,{path:"/documents/:id",children:Object(Ke.jsx)(_n,{})}),Object(Ke.jsx)(Le.a,{path:"/account/:id",children:Object(Ke.jsx)(gn,{})}),Object(Ke.jsx)(Le.a,{path:"/test",children:Object(Ke.jsx)(ht,{})}),Object(Ke.jsxs)(Le.a,{path:"/",children:[Object(Ke.jsx)(lt,{}),Object(Ke.jsx)(ct,{}),Object(Ke.jsx)(Ft,{})]})]})}),Object(Ke.jsx)(Kt,{})]})})})},Sn=function e(t){Object(h.a)(this,e),this.banner=void 0,this.args=void 0,Object.assign(this,t)},Nn=function(){},Cn=new(function(){function e(){Object(h.a)(this,e)}return Object(m.a)(e,[{key:"isEnabled",get:function(){return Boolean("true")}},{key:"timestamp",value:function(e){return"[".concat(e," ").concat((new Date).toLocaleTimeString(),"]")}},{key:"createLogEventModel",value:function(e){for(var t=function(e){return x.isString(e)?e:e instanceof Error?e.message:x.toJsonString(e)},n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];var i=new Sn({banner:this.timestamp(e),args:null===a||void 0===a?void 0:a.map((function(e){return Array.isArray(e)?e.map((function(e){return t(e)})):t(e)}))});return i}},{key:"debug",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var i=e.createLogEventModel("DEBUG",a);return(t=Function.prototype.bind).call.apply(t,[console.debug,console,i.banner].concat(a))}:Nn}},{key:"info",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var i=e.createLogEventModel("INFO",a);return(t=Function.prototype.bind).call.apply(t,[console.info,console,i.banner].concat(a))}:Nn}},{key:"warn",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];var i=e.createLogEventModel("WARN",a);return(t=Function.prototype.bind).call.apply(t,[console.warn,console,i.banner].concat(a))}:Nn}},{key:"error",get:function(){var e=this;return this.isEnabled?function(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];(null===a||void 0===a?void 0:a.length)>0&&(x.isString(a[0])||a.push("(See console output for more information.)"));var i=e.createLogEventModel("ERROR",a);return(t=Function.prototype.bind).call.apply(t,[console.error,console,i.banner].concat(a))}:Nn}}]),e}()),An=function(){var e=Object(d.b)(),t=r.a.useMemo((function(){return fe.getInstance()}),[]),n=r.a.useMemo((function(){return ae()}),[]),a=r.a.useMemo((function(){return Ue()}),[]);return r.a.useEffect((function(){function e(){return(e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.initAsync();case 2:return e.next=4,a.initContract();case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,a]),r.a.useEffect((function(){var t;Cn.debug("preferredNetwork:",null===e||void 0===e||null===(t=e.client)||void 0===t?void 0:t.preferredNetwork)(),a.setWalletProvider(e)}),[a,e]),Object(Ke.jsx)(p.a,{maxSnack:3,children:Object(Ke.jsx)(u.a,{client:n,children:Object(Ke.jsx)(In,{})})})},En=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,920)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},Dn=n(908),Tn=n(398),Pn=Object(Tn.a)(),Un=(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"https://tezdiploma.herokuapp.com/",REACT_APP_API_URL1:"http://localhost:4000",REACT_APP_GRAPHQL_URL:"https://tezdiploma.herokuapp.com/graphql",REACT_APP_GRAPHQL_URL1:"http://localhost:4000/graphql",REACT_APP_IS_DEV:"true",REACT_APP_NAME:"tez-diploma-client",REACT_APP_TEZOS_RPC_URL:"https://florencenet.smartpy.io/",REACT_APP_VERSION:"0.1.0"}).REACT_APP_NETWORK||"FLORENCENET").toUpperCase();c.a.render(Object(Ke.jsx)(Dn.a,{theme:Pn,children:Object(Ke.jsx)(d.a,{name:L,clientType:"taquito",network:Un,children:Object(Ke.jsx)(An,{})})}),document.getElementById("root")),En()}},[[851,1,2]]]);
//# sourceMappingURL=main.ddefe9a0.chunk.js.map